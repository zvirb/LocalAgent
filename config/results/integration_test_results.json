{"created": 1756179008.0775414, "duration": 20.583813190460205, "exitcode": 1, "root": "/home/marku/Documents/programming/LocalProgramming", "environment": {}, "summary": {"passed": 22, "failed": 1, "total": 23, "collected": 23}, "collectors": [{"nodeid": "", "outcome": "passed", "result": [{"nodeid": "tests/integration", "type": "Dir"}]}, {"nodeid": "tests/integration/test_mock_server.py", "outcome": "passed", "result": []}, {"nodeid": "tests/integration/test_provider_integration.py::TestOllamaProviderIntegration", "outcome": "passed", "result": [{"nodeid": "tests/integration/test_provider_integration.py::TestOllamaProviderIntegration::test_initialize_success", "type": "Coroutine", "lineno": 32}, {"nodeid": "tests/integration/test_provider_integration.py::TestOllamaProviderIntegration::test_initialize_failure", "type": "Coroutine", "lineno": 40}, {"nodeid": "tests/integration/test_provider_integration.py::TestOllamaProviderIntegration::test_list_models_success", "type": "Coroutine", "lineno": 49}, {"nodeid": "tests/integration/test_provider_integration.py::TestOllamaProviderIntegration::test_list_models_failure", "type": "Coroutine", "lineno": 59}, {"nodeid": "tests/integration/test_provider_integration.py::TestOllamaProviderIntegration::test_complete_success", "type": "Coroutine", "lineno": 73}, {"nodeid": "tests/integration/test_provider_integration.py::TestOllamaProviderIntegration::test_complete_with_system_prompt", "type": "Coroutine", "lineno": 91}, {"nodeid": "tests/integration/test_provider_integration.py::TestOllamaProviderIntegration::test_stream_complete_success", "type": "Coroutine", "lineno": 106}, {"nodeid": "tests/integration/test_provider_integration.py::TestOllamaProviderIntegration::test_complete_timeout_handling", "type": "Coroutine", "lineno": 125}, {"nodeid": "tests/integration/test_provider_integration.py::TestOllamaProviderIntegration::test_health_check_healthy", "type": "Coroutine", "lineno": 143}, {"nodeid": "tests/integration/test_provider_integration.py::TestOllamaProviderIntegration::test_health_check_unhealthy", "type": "Coroutine", "lineno": 154}, {"nodeid": "tests/integration/test_provider_integration.py::TestOllamaProviderIntegration::test_pull_model_success", "type": "Coroutine", "lineno": 165}, {"nodeid": "tests/integration/test_provider_integration.py::TestOllamaProviderIntegration::test_pull_model_failure", "type": "Coroutine", "lineno": 173}]}, {"nodeid": "tests/integration/test_provider_integration.py::TestProviderManagerIntegration", "outcome": "passed", "result": [{"nodeid": "tests/integration/test_provider_integration.py::TestProviderManagerIntegration::test_initialize_providers_integration", "type": "Coroutine", "lineno": 209}, {"nodeid": "tests/integration/test_provider_integration.py::TestProviderManagerIntegration::test_complete_with_fallback_integration", "type": "Coroutine", "lineno": 223}, {"nodeid": "tests/integration/test_provider_integration.py::TestProviderManagerIntegration::test_fallback_on_server_failure", "type": "Coroutine", "lineno": 239}, {"nodeid": "tests/integration/test_provider_integration.py::TestProviderManagerIntegration::test_concurrent_requests_integration", "type": "Coroutine", "lineno": 281}, {"nodeid": "tests/integration/test_provider_integration.py::TestProviderManagerIntegration::test_get_all_models_integration", "type": "Coroutine", "lineno": 307}, {"nodeid": "tests/integration/test_provider_integration.py::TestProviderManagerIntegration::test_health_check_all_integration", "type": "Coroutine", "lineno": 318}]}, {"nodeid": "tests/integration/test_provider_integration.py::TestProviderErrorRecovery", "outcome": "passed", "result": [{"nodeid": "tests/integration/test_provider_integration.py::TestProviderErrorRecovery::test_network_error_recovery", "type": "Coroutine", "lineno": 344}, {"nodeid": "tests/integration/test_provider_integration.py::TestProviderErrorRecovery::test_partial_stream_failure", "type": "Coroutine", "lineno": 371}, {"nodeid": "tests/integration/test_provider_integration.py::TestProviderErrorRecovery::test_timeout_handling", "type": "Coroutine", "lineno": 401}]}, {"nodeid": "tests/integration/test_provider_integration.py::TestMultiProviderScenarios", "outcome": "passed", "result": [{"nodeid": "tests/integration/test_provider_integration.py::TestMultiProviderScenarios::test_load_balancing_simulation", "type": "Coroutine", "lineno": 451}, {"nodeid": "tests/integration/test_provider_integration.py::TestMultiProviderScenarios::test_cost_optimization_strategy", "type": "Coroutine", "lineno": 495}]}, {"nodeid": "tests/integration/test_provider_integration.py", "outcome": "passed", "result": [{"nodeid": "tests/integration/test_provider_integration.py::TestOllamaProviderIntegration", "type": "Class"}, {"nodeid": "tests/integration/test_provider_integration.py::TestProviderManagerIntegration", "type": "Class"}, {"nodeid": "tests/integration/test_provider_integration.py::TestProviderErrorRecovery", "type": "Class"}, {"nodeid": "tests/integration/test_provider_integration.py::TestMultiProviderScenarios", "type": "Class"}]}, {"nodeid": "tests/integration", "outcome": "passed", "result": [{"nodeid": "tests/integration/test_mock_server.py", "type": "Module"}, {"nodeid": "tests/integration/test_provider_integration.py", "type": "Module"}]}], "tests": [{"nodeid": "tests/integration/test_provider_integration.py::TestOllamaProviderIntegration::test_initialize_success", "lineno": 32, "outcome": "passed", "keywords": ["test_initialize_success", "asyncio", "pytestmark", "TestOllamaProviderIntegration", "test_provider_integration.py", "integration", "tests", "LocalProgramming", ""], "setup": {"duration": 0.0012428730115061626, "outcome": "passed"}, "call": {"duration": 0.00238291198911611, "outcome": "passed"}, "teardown": {"duration": 0.5003897060087183, "outcome": "passed"}}, {"nodeid": "tests/integration/test_provider_integration.py::TestOllamaProviderIntegration::test_initialize_failure", "lineno": 40, "outcome": "passed", "keywords": ["test_initialize_failure", "asyncio", "pytestmark", "TestOllamaProviderIntegration", "test_provider_integration.py", "integration", "tests", "LocalProgramming", ""], "setup": {"duration": 0.0008875529892975464, "outcome": "passed"}, "call": {"duration": 0.5015002150030341, "outcome": "passed"}, "teardown": {"duration": 0.00048584600153844804, "outcome": "passed"}}, {"nodeid": "tests/integration/test_provider_integration.py::TestOllamaProviderIntegration::test_list_models_success", "lineno": 49, "outcome": "passed", "keywords": ["test_list_models_success", "asyncio", "pytestmark", "TestOllamaProviderIntegration", "test_provider_integration.py", "integration", "tests", "LocalProgramming", ""], "setup": {"duration": 0.0005327249964466318, "outcome": "passed"}, "call": {"duration": 0.0016538979980396107, "outcome": "passed"}, "teardown": {"duration": 0.5000803820003057, "outcome": "passed"}}, {"nodeid": "tests/integration/test_provider_integration.py::TestOllamaProviderIntegration::test_list_models_failure", "lineno": 59, "outcome": "passed", "keywords": ["test_list_models_failure", "asyncio", "pytestmark", "TestOllamaProviderIntegration", "test_provider_integration.py", "integration", "tests", "LocalProgramming", ""], "setup": {"duration": 0.0006838990084361285, "outcome": "passed"}, "call": {"duration": 0.0015716729976702482, "outcome": "passed"}, "teardown": {"duration": 0.5001704890019028, "outcome": "passed"}}, {"nodeid": "tests/integration/test_provider_integration.py::TestOllamaProviderIntegration::test_complete_success", "lineno": 73, "outcome": "passed", "keywords": ["test_complete_success", "asyncio", "pytestmark", "TestOllamaProviderIntegration", "test_provider_integration.py", "integration", "tests", "LocalProgramming", ""], "setup": {"duration": 0.0006953910051379353, "outcome": "passed"}, "call": {"duration": 0.20248272799653932, "outcome": "passed"}, "teardown": {"duration": 0.2996441639988916, "outcome": "passed"}}, {"nodeid": "tests/integration/test_provider_integration.py::TestOllamaProviderIntegration::test_complete_with_system_prompt", "lineno": 91, "outcome": "passed", "keywords": ["test_complete_with_system_prompt", "asyncio", "pytestmark", "TestOllamaProviderIntegration", "test_provider_integration.py", "integration", "tests", "LocalProgramming", ""], "setup": {"duration": 0.000803826012997888, "outcome": "passed"}, "call": {"duration": 0.20202667798730545, "outcome": "passed"}, "teardown": {"duration": 0.2998425139958272, "outcome": "passed"}}, {"nodeid": "tests/integration/test_provider_integration.py::TestOllamaProviderIntegration::test_stream_complete_success", "lineno": 106, "outcome": "passed", "keywords": ["test_stream_complete_success", "asyncio", "pytestmark", "TestOllamaProviderIntegration", "test_provider_integration.py", "integration", "tests", "LocalProgramming", ""], "setup": {"duration": 0.0005804950051242486, "outcome": "passed"}, "call": {"duration": 0.40307281899731606, "outcome": "passed"}, "teardown": {"duration": 0.09839726499922108, "outcome": "passed"}}, {"nodeid": "tests/integration/test_provider_integration.py::TestOllamaProviderIntegration::test_complete_timeout_handling", "lineno": 125, "outcome": "passed", "keywords": ["test_complete_timeout_handling", "asyncio", "pytestmark", "TestOllamaProviderIntegration", "test_provider_integration.py", "integration", "tests", "LocalProgramming", ""], "setup": {"duration": 0.00078715400013607, "outcome": "passed"}, "call": {"duration": 2.002268679003464, "outcome": "passed"}, "teardown": {"duration": 0.0009982420015148818, "outcome": "passed"}}, {"nodeid": "tests/integration/test_provider_integration.py::TestOllamaProviderIntegration::test_health_check_healthy", "lineno": 143, "outcome": "passed", "keywords": ["test_health_check_healthy", "asyncio", "pytestmark", "TestOllamaProviderIntegration", "test_provider_integration.py", "integration", "tests", "LocalProgramming", ""], "setup": {"duration": 0.0005051330081187189, "outcome": "passed"}, "call": {"duration": 0.0028095869929529727, "outcome": "passed"}, "teardown": {"duration": 0.5000130130065372, "outcome": "passed"}}, {"nodeid": "tests/integration/test_provider_integration.py::TestOllamaProviderIntegration::test_health_check_unhealthy", "lineno": 154, "outcome": "failed", "keywords": ["test_health_check_unhealthy", "asyncio", "pytestmark", "TestOllamaProviderIntegration", "test_provider_integration.py", "integration", "tests", "LocalProgramming", ""], "setup": {"duration": 0.0007016720046522096, "outcome": "passed"}, "call": {"duration": 0.5016289349878207, "outcome": "failed", "crash": {"path": "/home/marku/Documents/programming/LocalProgramming/tests/integration/test_provider_integration.py", "lineno": 164, "message": "AssertionError: assert 'error' in {'healthy': False, 'models': [], 'models_available': 0, 'provider': 'ollama'}"}, "traceback": [{"path": "tests/integration/test_provider_integration.py", "lineno": 164, "message": "in test_health_check_unhealthy"}], "longrepr": "tests/integration/test_provider_integration.py:164: in test_health_check_unhealthy\n    assert 'error' in health\nE   AssertionError: assert 'error' in {'healthy': False, 'models': [], 'models_available': 0, 'provider': 'ollama'}"}, "teardown": {"duration": 0.0006666760018561035, "outcome": "passed"}}, {"nodeid": "tests/integration/test_provider_integration.py::TestOllamaProviderIntegration::test_pull_model_success", "lineno": 165, "outcome": "passed", "keywords": ["test_pull_model_success", "asyncio", "pytestmark", "TestOllamaProviderIntegration", "test_provider_integration.py", "integration", "tests", "LocalProgramming", ""], "setup": {"duration": 0.0005260420002741739, "outcome": "passed"}, "call": {"duration": 0.0015534090052824467, "outcome": "passed"}, "teardown": {"duration": 0.5004233250074321, "outcome": "passed"}}, {"nodeid": "tests/integration/test_provider_integration.py::TestOllamaProviderIntegration::test_pull_model_failure", "lineno": 173, "outcome": "passed", "keywords": ["test_pull_model_failure", "asyncio", "pytestmark", "TestOllamaProviderIntegration", "test_provider_integration.py", "integration", "tests", "LocalProgramming", ""], "setup": {"duration": 0.0007159999950090423, "outcome": "passed"}, "call": {"duration": 0.0015334110066760331, "outcome": "passed"}, "teardown": {"duration": 0.5003321810072521, "outcome": "passed"}}, {"nodeid": "tests/integration/test_provider_integration.py::TestProviderManagerIntegration::test_initialize_providers_integration", "lineno": 209, "outcome": "passed", "keywords": ["test_initialize_providers_integration", "asyncio", "pytestmark", "TestProviderManagerIntegration", "test_provider_integration.py", "integration", "tests", "LocalProgramming", ""], "setup": {"duration": 0.0009439590066904202, "outcome": "passed"}, "call": {"duration": 0.0036384099948918447, "outcome": "passed"}, "teardown": {"duration": 0.9969637579924893, "outcome": "passed"}}, {"nodeid": "tests/integration/test_provider_integration.py::TestProviderManagerIntegration::test_complete_with_fallback_integration", "lineno": 223, "outcome": "passed", "keywords": ["test_complete_with_fallback_integration", "asyncio", "pytestmark", "TestProviderManagerIntegration", "test_provider_integration.py", "integration", "tests", "LocalProgramming", ""], "setup": {"duration": 0.0010317250125808641, "outcome": "passed"}, "call": {"duration": 0.20606641999620479, "outcome": "passed"}, "teardown": {"duration": 0.79465232900111, "outcome": "passed"}}, {"nodeid": "tests/integration/test_provider_integration.py::TestProviderManagerIntegration::test_fallback_on_server_failure", "lineno": 239, "outcome": "passed", "keywords": ["test_fallback_on_server_failure", "asyncio", "pytestmark", "TestProviderManagerIntegration", "test_provider_integration.py", "integration", "tests", "LocalProgramming", ""], "setup": {"duration": 0.0008978330006357282, "outcome": "passed"}, "call": {"duration": 0.6085293420037488, "outcome": "passed", "stdout": "Provider primary failed: 'message'\n"}, "teardown": {"duration": 0.8925311920029344, "outcome": "passed"}}, {"nodeid": "tests/integration/test_provider_integration.py::TestProviderManagerIntegration::test_concurrent_requests_integration", "lineno": 281, "outcome": "passed", "keywords": ["test_concurrent_requests_integration", "asyncio", "pytestmark", "TestProviderManagerIntegration", "test_provider_integration.py", "integration", "tests", "LocalProgramming", ""], "setup": {"duration": 0.0009096750000026077, "outcome": "passed"}, "call": {"duration": 0.21292322500084992, "outcome": "passed"}, "teardown": {"duration": 0.7876029430044582, "outcome": "passed"}}, {"nodeid": "tests/integration/test_provider_integration.py::TestProviderManagerIntegration::test_get_all_models_integration", "lineno": 307, "outcome": "passed", "keywords": ["test_get_all_models_integration", "asyncio", "pytestmark", "TestProviderManagerIntegration", "test_provider_integration.py", "integration", "tests", "LocalProgramming", ""], "setup": {"duration": 0.0008134840027196333, "outcome": "passed"}, "call": {"duration": 0.00264919399342034, "outcome": "passed"}, "teardown": {"duration": 0.9983090199966682, "outcome": "passed"}}, {"nodeid": "tests/integration/test_provider_integration.py::TestProviderManagerIntegration::test_health_check_all_integration", "lineno": 318, "outcome": "passed", "keywords": ["test_health_check_all_integration", "asyncio", "pytestmark", "TestProviderManagerIntegration", "test_provider_integration.py", "integration", "tests", "LocalProgramming", ""], "setup": {"duration": 0.0009729539888212457, "outcome": "passed"}, "call": {"duration": 0.003333114000270143, "outcome": "passed"}, "teardown": {"duration": 0.9975116889982019, "outcome": "passed"}}, {"nodeid": "tests/integration/test_provider_integration.py::TestProviderErrorRecovery::test_network_error_recovery", "lineno": 344, "outcome": "passed", "keywords": ["test_network_error_recovery", "asyncio", "pytestmark", "TestProviderErrorRecovery", "test_provider_integration.py", "integration", "tests", "LocalProgramming", ""], "setup": {"duration": 0.0006434329989133403, "outcome": "passed"}, "call": {"duration": 0.3102659400028642, "outcome": "passed", "stderr": "----------------------------------------\nException occurred during processing of request from ('127.0.0.1', 42028)\nTraceback (most recent call last):\n  File \"/usr/lib/python3.12/socketserver.py\", line 692, in process_request_thread\n    self.finish_request(request, client_address)\n  File \"/usr/lib/python3.12/socketserver.py\", line 362, in finish_request\n    self.RequestHandlerClass(request, client_address, self)\n  File \"/home/marku/Documents/programming/LocalProgramming/tests/integration/test_mock_server.py\", line 363, in handler_factory\n    return MockLLMHandler(*args, scenario_manager=self.scenario_manager, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/marku/Documents/programming/LocalProgramming/tests/integration/test_mock_server.py\", line 19, in __init__\n    super().__init__(*args, **kwargs)\n  File \"/usr/lib/python3.12/socketserver.py\", line 761, in __init__\n    self.handle()\n  File \"/usr/lib/python3.12/http/server.py\", line 436, in handle\n    self.handle_one_request()\n  File \"/usr/lib/python3.12/http/server.py\", line 425, in handle_one_request\n    self.wfile.flush() #actually send the response if not already done.\n    ^^^^^^^^^^^^^^^^^^\nValueError: I/O operation on closed file.\n----------------------------------------\n"}, "teardown": {"duration": 0.29969346900179517, "outcome": "passed"}}, {"nodeid": "tests/integration/test_provider_integration.py::TestProviderErrorRecovery::test_partial_stream_failure", "lineno": 371, "outcome": "passed", "keywords": ["test_partial_stream_failure", "asyncio", "pytestmark", "TestProviderErrorRecovery", "test_provider_integration.py", "integration", "tests", "LocalProgramming", ""], "setup": {"duration": 0.000785922005889006, "outcome": "passed"}, "call": {"duration": 0.5026524400018388, "outcome": "passed"}, "teardown": {"duration": 0.0008170609944500029, "outcome": "passed"}}, {"nodeid": "tests/integration/test_provider_integration.py::TestProviderErrorRecovery::test_timeout_handling", "lineno": 401, "outcome": "passed", "keywords": ["test_timeout_handling", "asyncio", "pytestmark", "TestProviderErrorRecovery", "test_provider_integration.py", "integration", "tests", "LocalProgramming", ""], "setup": {"duration": 0.000636088996543549, "outcome": "passed"}, "call": {"duration": 1.0016982219967758, "outcome": "passed"}, "teardown": {"duration": 0.0007834270072635263, "outcome": "passed"}}, {"nodeid": "tests/integration/test_provider_integration.py::TestMultiProviderScenarios::test_load_balancing_simulation", "lineno": 451, "outcome": "passed", "keywords": ["test_load_balancing_simulation", "asyncio", "pytestmark", "TestMultiProviderScenarios", "test_provider_integration.py", "integration", "tests", "LocalProgramming", ""], "setup": {"duration": 0.000762388008297421, "outcome": "passed"}, "call": {"duration": 2.414321033997112, "outcome": "passed"}, "teardown": {"duration": 0.5884566220047418, "outcome": "passed"}}, {"nodeid": "tests/integration/test_provider_integration.py::TestMultiProviderScenarios::test_cost_optimization_strategy", "lineno": 495, "outcome": "passed", "keywords": ["test_cost_optimization_strategy", "asyncio", "pytestmark", "TestMultiProviderScenarios", "test_provider_integration.py", "integration", "tests", "LocalProgramming", ""], "setup": {"duration": 0.0011467120057204738, "outcome": "passed"}, "call": {"duration": 0.20412253399263136, "outcome": "passed"}, "teardown": {"duration": 0.400458718999289, "outcome": "passed"}}]}