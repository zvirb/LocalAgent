@import 'tailwindcss/base';
@import 'tailwindcss/components';
@import 'tailwindcss/utilities';

/* Modern CSS Reset and Base Styles */
@layer base {
  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

  * {
    margin: 0;
  }

  html {
    height: 100%;
    font-size: 16px;
    line-height: 1.5;
    -webkit-text-size-adjust: 100%;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  body {
    height: 100%;
    font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    background-color: theme('colors.terminal.bg');
    color: theme('colors.terminal.fg');
    line-height: inherit;
    overflow: hidden;
  }

  #root {
    height: 100vh;
    isolation: isolate;
  }

  /* Typography improvements */
  h1, h2, h3, h4, h5, h6 {
    font-weight: 600;
    line-height: 1.25;
  }

  p {
    text-wrap: pretty;
  }

  /* Form elements */
  input, button, textarea, select {
    font: inherit;
  }

  button {
    cursor: pointer;
  }

  /* Links */
  a {
    color: theme('colors.accent.primary');
    text-decoration: none;
  }

  a:hover {
    color: theme('colors.accent.primary');
    opacity: 0.8;
  }

  /* Focus styles for accessibility */
  :focus-visible {
    outline: 2px solid theme('colors.accent.primary');
    outline-offset: 2px;
  }

  /* Selection styles */
  ::selection {
    background-color: theme('colors.terminal.selection');
    color: theme('colors.terminal.fg');
  }
}

/* Component styles */
@layer components {
  /* Terminal container styles */
  .terminal-container {
    @apply relative w-full h-full bg-terminal-bg;
    font-family: 'JetBrains Mono', 'Fira Code', 'Cascadia Code', Monaco, Consolas, monospace;
    font-variant-ligatures: common-ligatures;
  }

  .terminal-container .xterm {
    @apply w-full h-full;
  }

  .terminal-container .xterm-viewport {
    @apply terminal-scrollbar;
  }

  /* Button variants */
  .btn {
    @apply inline-flex items-center justify-center px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-terminal-bg;
  }

  .btn-primary {
    @apply btn bg-accent-primary text-white hover:bg-accent-primary/90 focus:ring-accent-primary;
  }

  .btn-secondary {
    @apply btn bg-surface-300 text-terminal-fg hover:bg-surface-400 focus:ring-surface-400;
  }

  .btn-ghost {
    @apply btn bg-transparent text-terminal-fg hover:bg-surface-200 focus:ring-surface-400;
  }

  .btn-danger {
    @apply btn bg-accent-error text-white hover:bg-accent-error/90 focus:ring-accent-error;
  }

  .btn-sm {
    @apply px-3 py-1.5 text-xs;
  }

  .btn-lg {
    @apply px-6 py-3 text-base;
  }

  /* Input styles */
  .input {
    @apply block w-full px-3 py-2 bg-surface-200 border border-surface-400 rounded-lg text-terminal-fg placeholder-surface-500 transition-colors duration-200;
    @apply focus:outline-none focus:ring-2 focus:ring-accent-primary focus:border-accent-primary;
  }

  .input-sm {
    @apply px-2 py-1.5 text-sm;
  }

  .input-lg {
    @apply px-4 py-3 text-base;
  }

  /* Card styles */
  .card {
    @apply bg-surface-100 border border-surface-300 rounded-lg p-4;
  }

  .card-header {
    @apply border-b border-surface-300 pb-3 mb-4;
  }

  .card-title {
    @apply text-lg font-semibold text-terminal-fg;
  }

  .card-description {
    @apply text-sm text-surface-500 mt-1;
  }

  /* Modal styles */
  .modal-backdrop {
    @apply fixed inset-0 bg-black/50 backdrop-blur-sm z-50;
  }

  .modal-content {
    @apply bg-surface-100 border border-surface-300 rounded-lg shadow-xl;
  }

  /* Badge styles */
  .badge {
    @apply inline-flex items-center px-2 py-1 text-xs font-medium rounded-full;
  }

  .badge-success {
    @apply badge bg-accent-success/20 text-accent-success;
  }

  .badge-warning {
    @apply badge bg-accent-warning/20 text-accent-warning;
  }

  .badge-error {
    @apply badge bg-accent-error/20 text-accent-error;
  }

  .badge-info {
    @apply badge bg-accent-info/20 text-accent-info;
  }

  /* Status indicator */
  .status-indicator {
    @apply w-2 h-2 rounded-full;
  }

  .status-online {
    @apply status-indicator bg-accent-success;
  }

  .status-offline {
    @apply status-indicator bg-surface-500;
  }

  .status-connecting {
    @apply status-indicator bg-accent-warning animate-pulse;
  }

  /* Loading spinner */
  .spinner {
    @apply animate-spin rounded-full border-2 border-transparent;
  }

  .spinner-primary {
    @apply spinner border-t-accent-primary border-r-accent-primary;
  }

  /* Drag and drop styles */
  .drop-zone {
    @apply border-2 border-dashed border-surface-400 rounded-lg transition-colors duration-200;
  }

  .drop-zone-active {
    @apply drop-zone border-accent-primary bg-accent-primary/10;
  }

  .drop-zone-accept {
    @apply drop-zone border-accent-success bg-accent-success/10;
  }

  .drop-zone-reject {
    @apply drop-zone border-accent-error bg-accent-error/10;
  }

  /* Collaboration styles */
  .cursor-indicator {
    @apply absolute w-0.5 h-4 animate-pulse;
  }

  .participant-avatar {
    @apply w-8 h-8 rounded-full border-2 border-surface-400 bg-surface-300 flex items-center justify-center text-xs font-medium;
  }

  /* Keyboard shortcut display */
  .kbd {
    @apply inline-flex items-center px-1.5 py-1 text-xs font-mono bg-surface-200 border border-surface-400 rounded;
  }

  /* Syntax highlighting for terminal output */
  .terminal-syntax-keyword {
    @apply text-accent-primary font-medium;
  }

  .terminal-syntax-string {
    @apply text-accent-success;
  }

  .terminal-syntax-number {
    @apply text-accent-info;
  }

  .terminal-syntax-comment {
    @apply text-surface-500 italic;
  }

  .terminal-syntax-error {
    @apply text-accent-error font-medium;
  }

  .terminal-syntax-warning {
    @apply text-accent-warning;
  }
}

/* Utility styles */
@layer utilities {
  /* Terminal-specific utilities */
  .terminal-font {
    font-family: 'JetBrains Mono', 'Fira Code', 'Cascadia Code', Monaco, Consolas, monospace;
    font-variant-ligatures: common-ligatures;
    font-feature-settings: 'liga' 1, 'calt' 1;
  }

  .terminal-size-xs { font-size: theme('fontSize.terminal-xs.0'); line-height: theme('fontSize.terminal-xs.1.lineHeight'); }
  .terminal-size-sm { font-size: theme('fontSize.terminal-sm.0'); line-height: theme('fontSize.terminal-sm.1.lineHeight'); }
  .terminal-size-base { font-size: theme('fontSize.terminal-base.0'); line-height: theme('fontSize.terminal-base.1.lineHeight'); }
  .terminal-size-lg { font-size: theme('fontSize.terminal-lg.0'); line-height: theme('fontSize.terminal-lg.1.lineHeight'); }
  .terminal-size-xl { font-size: theme('fontSize.terminal-xl.0'); line-height: theme('fontSize.terminal-xl.1.lineHeight'); }

  /* Glass morphism effect */
  .glass {
    background: rgba(22, 27, 34, 0.8);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  /* Gradient text */
  .text-gradient {
    background: linear-gradient(90deg, theme('colors.accent.primary'), theme('colors.accent.info'));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* Safe area handling for mobile */
  .safe-top { padding-top: env(safe-area-inset-top); }
  .safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
  .safe-left { padding-left: env(safe-area-inset-left); }
  .safe-right { padding-right: env(safe-area-inset-right); }
  .safe-area { 
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }

  /* Touch-friendly sizing */
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }

  /* Scrollbar utilities */
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
}

/* Animation keyframes */
@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fade-in-down {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slide-in-right {
  from {
    opacity: 0;
    transform: translateX(10px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes pulse-glow {
  0%, 100% {
    box-shadow: 0 0 5px theme('colors.accent.primary');
  }
  50% {
    box-shadow: 0 0 20px theme('colors.accent.primary'), 0 0 30px theme('colors.accent.primary');
  }
}

/* Responsive design helpers */
@media (max-width: 768px) {
  .mobile-hide {
    display: none !important;
  }
  
  .mobile-full {
    width: 100% !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
  }
}

@media (min-width: 769px) {
  .desktop-hide {
    display: none !important;
  }
}

/* Print styles */
@media print {
  * {
    background: transparent !important;
    color: black !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }
  
  .no-print {
    display: none !important;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  :root {
    --terminal-bg: #000000;
    --terminal-fg: #ffffff;
    --accent-primary: #00ff00;
  }
  
  .card, .modal-content, .input {
    border-width: 2px !important;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  
  .animate-spin,
  .animate-pulse,
  .animate-bounce {
    animation: none !important;
  }
}